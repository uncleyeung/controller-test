## 总结

1. 共享、可变的变量形成了并发编程的三大杀手：_安全性_ 、_活跃性_、_性能_，本章详细讨论安全性问题。

2. 本文中的共享变量指的是在堆内存上创建的对象或者数组，包括成员变量、静态变量和数组元素。

3. 安全性问题包括三个方面，_原子性操作_、_内存可见性_和_指令重排序_，本篇文章主要对原子性操作进行详细讨论。

4. 原子性操作就是一个或某几个操作只能在一个线程执行完之后，另一个线程才能开始执行该操作，也就是说这些操作是不可分割的，线程不能在这些操作上交替执行。
5. 任何一个对象都可以作为一个锁，也称为内置锁。某个线程在进入某个同步代码块的时候去获取一个锁，在退出该代码块的时候把锁给释放掉。

6. 锁的重入是指只要一个线程持有了某个锁，那么它就可以进入任何被这个锁保护的代码块。

7. 同步方法是一种比较特殊的同步代码块，对于成员方法来讲，使用this作为锁对象，对于静态方法来说，使用Class对象作为锁对象。

8. 为了保证某些操作的原子性，提出了下边几种解决方案：
 +  尽量使用局部变量解决问题

 +  使用 ThreadLocal 类解决问题

 +  从共享性解决，在编程时，最好使用下边这两种方案解决问题：

 +  从可变性解决，最好让某个变量在程序运行过程中不可变，把它使用final修饰。

 +  加锁解决

