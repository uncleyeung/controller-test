## objectwait/notify 机制
+ 线程间需要通过通信才能协作解决某个复杂的问题。

+ 可变共享变量是天然的通信媒介，但是使用的时候一定要保证线程安全性，通常使用volatile变量或synchronized来保证线程安全性。

+ 一个线程在获取到锁之后，如果指定条件不满足的话，应该主动让出锁，然后到专门的等待区等待，直到某个线程完成了指定的条件，再通知一下在等待这个条件完成的线程，让它们继续执行。这个机制就是wait/notify机制。
###### 等待线程的通用模式：
```java
synchronized (对象) {
    处理逻辑（可选）
    while(条件不满足) {
        对象.wait();
    }
    处理逻辑（可选）
}
```


可以分为下边几个步骤：

+ 获取对象锁。

+ 如果某个条件不满足的话，调用锁对象的 wait 方法，被通知后仍要检查条件是否满足。

+ 条件满足则继续执行代码。

###### 通知线程的通用模式：
```java
synchronized (对象) {
    完成条件
    对象.notifyAll();、
}
```
可以分为下边几个步骤：

+ 获得对象的锁。

+ 完成条件。

+ 通知在等待队列中的等待线程。

##### wait和sleep的区别

+ wait 是 Object 的成员方法，而 sleep 是 Thread 的静态方法。

+ 调用 wait 方法需要先获得锁，而调用 sleep 方法是不需要的。

+ 调用 wait 方法的线程需要用 notify 来唤醒，而 sleep 必须设置超时值。

+ 线程在调用 wait 方法之后会先释放锁，而 sleep 不会释放锁。
